{
  "name": "eslint-config-fsd",
  "description": "ESLint configuration for Feature-Sliced Design (FSD) compliance",
  "version": "1.0.0",
  "main": "index.js",
  "keywords": ["eslint", "fsd", "feature-sliced-design", "architecture", "frontend"],
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^6.0.0",
    "@typescript-eslint/parser": "^6.0.0",
    "eslint": "^8.0.0",
    "eslint-plugin-boundaries": "^4.0.0",
    "eslint-plugin-import": "^2.27.0"
  },
  "eslintConfig": {
    "extends": [
      "@typescript-eslint/recommended",
      "plugin:import/typescript"
    ],
    "parser": "@typescript-eslint/parser",
    "plugins": [
      "@typescript-eslint",
      "boundaries",
      "import"
    ],
    "settings": {
      "import/resolver": {
        "typescript": {
          "alwaysTryTypes": true
        }
      },
      "boundaries/elements": [
        {
          "type": "app",
          "pattern": "src/app/**/*"
        },
        {
          "type": "pages",
          "pattern": "src/pages/**/*"
        },
        {
          "type": "widgets",
          "pattern": "src/widgets/**/*"
        },
        {
          "type": "features",
          "pattern": "src/features/**/*"
        },
        {
          "type": "entities",
          "pattern": "src/entities/**/*"
        },
        {
          "type": "shared",
          "pattern": "src/shared/**/*"
        }
      ],
      "boundaries/ignore": [
        "**/*.test.*",
        "**/*.spec.*",
        "**/*.stories.*",
        "**/node_modules/**"
      ]
    },
    "rules": {
      "boundaries/element-types": [
        "error",
        {
          "default": "disallow",
          "rules": [
            {
              "from": ["app"],
              "allow": ["pages", "widgets", "features", "entities", "shared"]
            },
            {
              "from": ["pages"],
              "allow": ["widgets", "features", "entities", "shared"]
            },
            {
              "from": ["widgets"],
              "allow": ["features", "entities", "shared"]
            },
            {
              "from": ["features"],
              "allow": ["entities", "shared"]
            },
            {
              "from": ["entities"],
              "allow": ["shared"]
            },
            {
              "from": ["shared"],
              "allow": []
            }
          ]
        }
      ],
      "boundaries/no-unknown": ["error"],
      "boundaries/no-unknown-files": ["error"],
      "import/no-internal-modules": [
        "error",
        {
          "allow": [
            "**/shared/**",
            "**/entities/*/model",
            "**/entities/*/ui",
            "**/entities/*/api",
            "**/features/*/model", 
            "**/features/*/ui",
            "**/features/*/api",
            "**/widgets/*/model",
            "**/widgets/*/ui", 
            "**/widgets/*/api",
            "**/pages/*/model",
            "**/pages/*/ui",
            "**/pages/*/api"
          ]
        }
      ],
      "import/order": [
        "error",
        {
          "groups": [
            "builtin",
            "external", 
            "internal",
            "parent",
            "sibling",
            "index"
          ],
          "pathGroups": [
            {
              "pattern": "app/**",
              "group": "internal",
              "position": "before"
            },
            {
              "pattern": "pages/**",
              "group": "internal", 
              "position": "before"
            },
            {
              "pattern": "widgets/**",
              "group": "internal",
              "position": "before"
            },
            {
              "pattern": "features/**",
              "group": "internal",
              "position": "before"
            },
            {
              "pattern": "entities/**",
              "group": "internal",
              "position": "before"
            },
            {
              "pattern": "shared/**",
              "group": "internal",
              "position": "before"
            }
          ],
          "pathGroupsExcludedImportTypes": ["builtin"],
          "alphabetize": {
            "order": "asc",
            "caseInsensitive": true
          }
        }
      ],
      "@typescript-eslint/no-restricted-imports": [
        "error",
        {
          "patterns": [
            {
              "group": ["src/app/**"],
              "importNames": ["*"],
              "message": "App layer should not be imported by other layers"
            },
            {
              "group": ["src/pages/**"],
              "importNames": ["*"],
              "message": "Pages layer should not be imported by lower layers",
              "allowTypeImports": false
            }
          ]
        }
      ]
    },
    "overrides": [
      {
        "files": ["src/app/**/*"],
        "rules": {
          "boundaries/element-types": [
            "error",
            {
              "default": "disallow",
              "rules": [
                {
                  "from": ["app"],
                  "allow": ["pages", "widgets", "features", "entities", "shared"]
                }
              ]
            }
          ]
        }
      },
      {
        "files": ["src/pages/**/*"],
        "rules": {
          "boundaries/element-types": [
            "error", 
            {
              "default": "disallow",
              "rules": [
                {
                  "from": ["pages"],
                  "allow": ["widgets", "features", "entities", "shared"]
                }
              ]
            }
          ]
        }
      },
      {
        "files": ["src/widgets/**/*"],
        "rules": {
          "boundaries/element-types": [
            "error",
            {
              "default": "disallow", 
              "rules": [
                {
                  "from": ["widgets"],
                  "allow": ["features", "entities", "shared"]
                }
              ]
            }
          ]
        }
      },
      {
        "files": ["src/features/**/*"],
        "rules": {
          "boundaries/element-types": [
            "error",
            {
              "default": "disallow",
              "rules": [
                {
                  "from": ["features"],
                  "allow": ["entities", "shared"]
                }
              ]
            }
          ]
        }
      },
      {
        "files": ["src/entities/**/*"],
        "rules": {
          "boundaries/element-types": [
            "error",
            {
              "default": "disallow",
              "rules": [
                {
                  "from": ["entities"],
                  "allow": ["shared"]
                }
              ]
            }
          ]
        }
      },
      {
        "files": ["src/shared/**/*"],
        "rules": {
          "boundaries/element-types": [
            "error",
            {
              "default": "disallow",
              "rules": [
                {
                  "from": ["shared"],
                  "allow": []
                }
              ]
            }
          ]
        }
      }
    ]
  },
  "scripts": {
    "lint": "eslint src/**/*.{ts,tsx,js,jsx}",
    "lint:fix": "eslint src/**/*.{ts,tsx,js,jsx} --fix",
    "lint:fsd": "eslint src/**/*.{ts,tsx,js,jsx} --config .eslintrc.fsd.js"
  }
}